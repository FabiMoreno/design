
"use strict";const ESC_KEY=27;const SPACE_KEY=32;const ENTER_KEY=13;function addEars(els,et,f){els.forEach(e=>{e.addEventListener(et,f,false)})}
function makeActive(els,activeClass,index){if(els.length>=1){Array.prototype.forEach.call(els,function(el){el.classList.remove(activeClass);});els[index].classList.add(activeClass);}else{els.classList.add(activeClass);}}
function changeClasses(e,actions){for(let key in actions){if(actions.hasOwnProperty(key)){let aName=key
let classes=actions[key]
classes.forEach(className=>{e.classList[aName](className)})}}}
const dropdownClass='.c--dropdown';const dropdownTriggerClass='.a--dropdown-trigger';const dropdownContentClass='.a--dropdown-content';function findDropdowns(cName){let dropObjects=document.querySelectorAll(cName);dropObjects.forEach(dropObject=>{dropObject.addEventListener('click',function(e){e.preventDefault(this)
e.stopPropagation()
closeAllDropdowns(dropdownClass,this)
toggleDropdown(this)
checkEdge(this)},false)
dropObject.addEventListener('keydown',function(e){if(e.which===SPACE_KEY||e.which===ENTER_KEY){e.preventDefault(this)
e.stopPropagation()
closeAllDropdowns(dropdownClass,this)
toggleDropdown(this)
checkEdge(this)}
else if(e.which===ESC_KEY){closeAllDropdowns(dropdownClass)}},false)})
document.querySelector('body').addEventListener('click',function(e){closeAllDropdowns(dropdownClass);})}
function closeAllDropdowns(e,exclude){let allDropdowns=document.querySelectorAll(e);allDropdowns.forEach(dropdown=>{if(exclude){if(exclude==dropdown){return;}}
let contentContainer=dropdown.querySelector(dropdownContentClass)
let dropdownTrigger=dropdown.querySelector(dropdownTriggerClass)
dropdownTrigger.setAttribute('aria-expanded',false)
contentContainer.setAttribute('aria-hidden',true)
contentContainer.setAttribute('aria-expanded',false)})}
function checkEdge(e){const contentContainer=e;const clientLeft=contentContainer.offsetLeft;const clientWidth=contentContainer.offsetWidth;const triggerWidth=contentContainer.parentElement.querySelector(dropdownTriggerClass).offsetWidth;const documentWidth=document.querySelector('body').offsetWidth;if(clientLeft+clientWidth>=documentWidth-20||triggerWidth>=clientWidth){changeClasses(contentContainer,{add:['edge']});}else{changeClasses(contentContainer,{remove:['edge']});}}
function toggleDropdown(e){console.log(e);const dropdownTrigger=e.querySelector(dropdownTriggerClass);const contentContainer=e.querySelector(dropdownContentClass);const ariaExpandedState=dropdownTrigger.getAttribute('aria-expanded')!=='false';dropdownTrigger.setAttribute('aria-expanded',!ariaExpandedState);contentContainer.setAttribute('aria-hidden',ariaExpandedState);contentContainer.setAttribute('aria-expanded',!ariaExpandedState);}
function snippetTabs(containers){containers.forEach(container=>{const codeSnippets=container.querySelectorAll('table.codehilite');const numOfTabs=codeSnippets.length;let i=0;const toggleNav=container.querySelector('ul');const toggleNavItem=toggleNav.querySelectorAll('li');toggleNav.classList.add('nav--snippet-toggle');function toggleSnippet(a,index){makeActive(toggleNavItem,'current',index);makeActive(codeSnippets,'active',index);}
do{if(i===0){toggleNavItem[i].classList.add('current');codeSnippets[i].classList.add('active');}
toggleNavItem[i].querySelector('a').addEventListener('click',function(event){event.preventDefault(this);toggleSnippet(this,this.getAttribute('href'));},false);i++;}
while(i<numOfTabs);})}
function selectAllCodes(){var codeSelects=document.querySelectorAll('.click_to_select_all');codeSelects.forEach(codeSelect=>{codeSelect.addEventListener('click',function(){this.select()})})}
function selectText(containerid){var node=containerid;if(document.selection){var range=document.body.createTextRange();range.moveToElementText(node);range.select();}else if(window.getSelection){var rangeW=document.createRange();rangeW.selectNodeContents(node);window.getSelection().removeAllRanges();window.getSelection().addRange(rangeW);}}
function findCodeHiite(){let codeSelectDivs=document.querySelectorAll('div.click_to_select_div');codeSelectDivs.forEach(codeSelectDiv=>{codeSelectDiv.addEventListener('click',function(){selectText(codeSelectDiv)})})}
function fakeTypeAhead(){let focused=document.activeElement;if(this===focused){this.addEventListener('keydown',function(){this.nextElementSibling.style.display="block"},false)}}
function closeTypeAhead(){this.nextElementSibling.style.display="none"}
function jumpToActive(){var anchors=document.querySelectorAll('.c--snippet-title')
var nav=document.querySelector('.base-sidebar .navigation .subnav.active')
window.addEventListener('scroll',function(){var currentPos=(scrollY+300)
Array.prototype.forEach.call(anchors,function(anchor){if(currentPos>=anchor.offsetTop){var navItems=nav.querySelectorAll('a.active:not([data-goto="'+anchor.getAttribute('id')+'"])')
Array.prototype.forEach.call(navItems,function(navItem){navItem.classList.remove('active')})
nav.querySelector('a[data-goto="'+anchor.getAttribute('id')+'"]').classList.add('active')}})})}
var dplPages=[]
var dplSearch=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace('name','description'),queryTokenizer:Bloodhound.tokenizers.whitespace,limit:60,prefetch:{url:['json/search.json'],transform:function(response){response.forEach(page=>{if(page.sections){page.sections.forEach(section=>{section['parent']=page.id
response.push(section)})}})
return response}},});var tParent={name:'page',display:function(item){return item.name},highlight:true,hint:false,minLength:2,source:dplSearch.ttAdapter(),templates:{empty:function(page){return`<div class="empty-message"> Your search for <strong>${page.query}</strong> has returned 0 results.</div>`},suggestion:function(page){const searchAddress=new Object();searchAddress['name']=page.name
let searchResult='<a class="dpl-s-result" href="'
if(page.parent){searchResult+=page.parent
searchAddress['base']=page.parent}else{searchResult+=page.id
searchAddress['base']=page.id}
searchResult+='.html'
if(page.parent){searchResult+='#'+page.id
searchAddress['child']=page.id}
searchResult+='">'+page.name+'<br /> <i>'+page.description+'</i></a>'
dplPages.push(searchAddress)
return searchResult}}}
function goToPage(searchItem){let selected=searchItem.currentTarget.value
let selectedAddress=dplPages.find(s=>s.name==selected)
let searchAddress=`${selectedAddress.base}.html`
if(selectedAddress.child){searchAddress+=`#${selectedAddress.child}`}
window.location.replace(searchAddress)}
jQuery('#dpl-search').typeahead(null,tParent).on('typeahead:selected',goToPage).on('typeahead:autocompleted',goToPage);var fa=function(){const codeContainers=document.querySelectorAll('.c-example-code');const wonkaBar=document.querySelectorAll('.l-component-cluster .wonka-bar input');if(codeContainers.length>=1){snippetTabs(codeContainers);findCodeHiite(codeContainers);}
addEars(wonkaBar,'focus',fakeTypeAhead)
addEars(wonkaBar,'blur',closeTypeAhead)
selectAllCodes()
findDropdowns('.c--dropdown')
jumpToActive()};function ready(fa){if(document.readyState!=='loading'){console.log('document no ready');fa();}else{document.addEventListener('DOMContentLoaded',fa);console.log('woot! all ready to go');}}
ready(fa);